% !TEX root = cheatsheet.tex

\usepackage[english]{babel}
\usepackage{fontspec}
\usepackage{titlesec}
\usepackage{titling}
\usepackage{lipsum}
\usepackage{parskip}
\usepackage{fancyhdr}
\usepackage{etoolbox}
\usepackage{xcolor}
\usepackage{wrapfig}
\usepackage{array}
\usepackage{tabularx}
\usepackage[toc]{multitoc}
\usepackage[a4paper, top=1cm, bottom=2cm, inner=2cm, outer=1cm, left=1cm]{geometry}

% font defs
\newfontfamily\titlefont[]{AgencyFB Black}
\newfontfamily\cursivefont[]{REDRUM}
\newfontfamily\sectionfont[]{DIN Next LT Pro Heavy}
\setmainfont[
  BoldFont={DIN Next LT Pro Medium},
  Ligatures=TeX,
  Fractions=On
]{DIN Next LT Pro Light}

% title fonts
\pretitle{\fontsize{30}{30}\titlefont}
\renewcommand{\maketitlehookd}{\vspace{-2ex}}
\titleformat{\chapter}[block]{\cursivefont\Huge}{}{0pt}{}
\titleformat{\section}[block]{\sectionfont\LARGE}{}{0pt}{}
\titleformat{\subsection}[block]{\sectionfont\large}{}{0pt}{}
\titleformat{\subsubsection}[block]{\sectionfont}{}{0pt}{}

% subtitle
\newcommand{\subtitle}[1]{%
  \posttitle{%
    \hfill
    \fontsize{30}{30}\cursivefont#1}%
}

% toc styling
\setcounter{tocdepth}{1}

% headers and footers
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[LE,RO]{\cursivefont\Large\color{black!60}\thepage} % Left Even, Right Odd
\renewcommand{\headrulewidth}{0pt}

% spacing
\titlespacing{\chapter}{0pt}{0pt}{0pt}
\titlespacing{\section}{0pt}{-1ex}{-1.5ex}
\titlespacing{\subsection}{0pt}{0pt}{-1.25ex}
\titlespacing{\subsubsection}{0pt}{0pt}{-1.25ex}
\renewcommand{\baselinestretch}{1.1}
\setlength{\columnsep}{0.75cm}

% no blank pages after cover and toc
\let\cleardoublepage\clearpage

% chapter pages in frontmatter should be empty and in mainmatter should be fancy
\patchcmd{\chapter}{plain}{empty}{}{}
\providecommand{\mainmatter}{}
\let\oldmainmatter\mainmatter
\renewcommand{\mainmatter}{\oldmainmatter\patchcmd{\chapter}{empty}{fancy}{}{}}\providecommand{\mainmatter}{}

% shorthand commands
\newcommand*{\die}[1]{\emph{\textbf{#1}}}
\newcommand*{\stat}[2][]{%
\textbf{\ifthenelse{\equal{#1}{}}{#2}{#2 (#1)}}}
\newcommand*{\combined}[2]{\textbf{#1 \textbullet{} #2}}

\newcommand*{\prop}[2]{\emph{#1:}~#2\enspace}
\newenvironment{describe}[1]{
  \textbf{\large #1}
}{}

\newcommand*{\orr}{\textmd{\emph{or}} }

\newcommand*{\hnspace}{\hspace{0.3em}}

\newenvironment{switch}[1]{%
  \newcommand{\case}[2]{\ifdefequal{#1}{##1}{##2}{}}%
}{}

\def\durationInstant{1}
\def\durationQuick  {2}
\def\durationSteady {3}
\def\durationSlow   {5}
\def\durationLong   {8}

\newcommand*{\duration}[1]{%
\begin{switch}{#1}%
\case{\durationInstant}{Instant (\durationInstant tick)}%
\case{\durationQuick}{Quick (\durationQuick ticks)}%
\case{\durationSteady}{Steady (\durationSteady ticks)}%
\case{\durationSlow}{Slow (\durationSlow ticks)}%
\case{\durationLong}{Long (\durationLong ticks)}%
\end{switch}}

\newcounter{sectiondepth}
\setcounter{sectiondepth}{0}
\newenvironment{abstractsection}[1]{%
  \ifnum\thesectiondepth=0%
    \section{#1}
  \fi%
  \ifnum\thesectiondepth=1%
    \subsection{#1}
  \fi%
  \ifnum\thesectiondepth=2%
    \subsubsection{#1}
  \fi%
  \stepcounter{sectiondepth}
}{
  \addtocounter{sectiondepth}{-1}
}

\newcommand{\inputsection}[2]{
  \begin{abstractsection}{#1}
    \input{#2}
  \end{abstractsection}
}

\newcolumntype{$}{>{\global\let\currentrowstyle\relax}}
\newcolumntype{^}{>{\currentrowstyle}}
\newcommand{\rowstyle}[1]{\gdef\currentrowstyle{#1}%
  #1\ignorespaces
}
